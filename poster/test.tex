%\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
%\documentclass[ngerman,automark]{scrreprt}
%\usepackage{selinput}\SelectInputMappings{adieresis={ä},germandbls={ß}}
%\usepackage[T1]{fontenc}
%\usepackage{babel}
%\usepackage{blindtext}
%\usepackage{scrlayer-scrpage}
%\usepackage{xcolor}
%
%\definecolor{HKS41}{cmyk}{1.00,0.70,0.10,0.50}
%\DeclareLayer[
%  background,page,%
%  contents={%
%    \color{HKS41}%
%    \rule[-\dp\strutbox]{\layerwidth}{\layerheight}%
%  },%
%]{mylayer}
%\DeclareNewPageStyleByLayers[%
%  onbackground=\color{white},
%]{mypagestyle}{%
%  scrheadings.head.odd,%
%  scrheadings.head.even,%
%  scrheadings.head.oneside,%
%  scrheadings.head.above.line,%
%  scrheadings.head.below.line,%
%  scrheadings.foot.odd,%
%  scrheadings.foot.even,%
%  scrheadings.foot.oneside,%
%  scrheadings.foot.above.line,%
%  scrheadings.foot.below.line,%
%  mylayer,%
%}
%\DeclareNewPageStyleAlias{myalias}{mypagestyle}
%\DeclarePageStyleAlias{headings}{scrheadings}
%\BeforeSelectAnyPageStyle{\typeout{+++++ #1}}
%
%\begin{document}
%\Blindtext[4][2]
%\clearpage
%
%\pagestyle{myalias}
%{
%\color{white}
%\Blindtext[4][2]
%\clearpage
%}
%
%\pagestyle{headings}
%\Blindtext[4][2]
%\end{document}



\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
\documentclass[%
  ngerman,automark,%
  twoside,open=right,color,
%  titlepage=no,
%  widehead,
%cleardoublespecialpage=color,
cleardoublespecialpage=tudheadings,
cdfoot,automark,twoside,
%  ddcfoot,color=pale,
%  geometry=no,
  DIV=12,%twoside,
%  headinclude,
%  footinclude,
%  twoside,
%  draft,
%%  cd=color,
%  paper=a6,
%cdfont=no,
%footinclude,
%footheight=3.6cm,
]%
{tudscrreprtnew}
%{scrreprt}
\usepackage{selinput}\SelectInputMappings{adieresis={ä},germandbls={ß}}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{blindtext}
\usepackage{showframe}
%\usepackage{layout}
\usepackage{tudscrcolor,twocolfix,pagecolor}
\usepackage{etoolbox}
\usepackage{scrlayer-scrpage}

%\TUDoptions{cleardoublespecialpage=tudscrheadings}
%\TUDoption{cleardoublespecialpage}{color}
%\renewcommand{\chapterpagestyle}{tudheadings}
\begin{document}
\faculty{Juristische Fakultät}
\department{Fachrichtung Strafrecht}
\institute{Institut für Kriminologie}
\chair{Lehrstuhl für Kriminalprognose und noch etwas}
\extraheadline{Lehrstuhl für Kriminalprognose}

\date{16.12.2014}
\author{Mickey Mouse}
\title{Die Klasse tudscrposter}
\subtitle{Eine \LaTeX-Klasse für die Evaluationsposter}
%\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter

\meaning\tud@cleardoublepage

\DeclareNewLayer[%
  background,align=tl,%
  contents={%
    \color{HKS41}%
    \rule{\layerwidth}{\tud@dim@headheight}%
  },%
]{tudheadings.head.back}%
\DeclareNewLayer[%
  background,align=tl,%
  voffset=\dimexpr\tud@dim@headheight-.0\tud@dim@line\relax,%
  contents={%
    \color{HKS41!80}%
    \rule{\layerwidth}{\tud@dim@barheight}
  },%
]{tudheadings.head.bar}%
\DeclareNewLayer[%
  background,
  hoffset=0pt,
  voffset=\dimexpr%
    \topmargin+1in+\headheight+\headsep+\textheight%
    +\footskip-\footheight\relax,%
  height=\dimexpr\paperheight-\layeryoffset\relax,%
  width=\paperwidth,%
  contents={%
    \color{HKS41!80}%
    \rule{\layerwidth}{\layerheight}%
  },%
]{tudheadings.foot.back}%
\DeclareLayer[%
  clone=tudheadings.foot.back,%
  hoffset=\dimexpr
    \if@twoside\ifodd\value{page}\oddsidemargin\else\evensidemargin\fi
    \else\oddsidemargin\fi
    +1in
  \relax,
  width=\textwidth,%
  height=\dimexpr\paperheight-\layeryoffset-1pt\relax,%
  contents={%
    \hfill\vbox to \layerheight{\vfil\hbox{\tud@ddclogo}\vfil}%
% ToDo §§§ evtl separater Layer für Drittlogos
%\vbox to \layerheight{\vfil\hbox{\includegraphics[height=1cm]{DDC-07}}\vfil}
  },%
]{tudheadings.foot.logo}%
\DeclareNewPageStyleByLayers[%
  onforeground=\color{red},% §§§ hier stimmt was nicht
]{color.tudheadings}{%
  tudheadings.head.back,%§§§
  tudheadings.head.bar,%§§§
  tudheadings.foot.back,%§§§
  tudheadings.head.mainlogo,%
  tudheadings.head.logo,%
  tudheadings.head.topline,%
  tudheadings.head.bottomline,%
  tudheadings.head.topwideline,%
  tudheadings.head.bottomwideline,%
  tudheadings.head.text,%
  tudheadings.foot.ddclogo,%
  scrheadings.foot.odd,%
  scrheadings.foot.even,%
  scrheadings.foot.oneside,%
  scrheadings.foot.above.line,%
  scrheadings.foot.below.line%
}%
\AddToLayerPageStyleOptions{color.tudheadings}{%
  onselect={%
    \tud@ps@init%
    \letcs\ps@plain{ps@plain.tudheadings}%
    \letcs\ps@headings{ps@tudheadings}%
    \def\sls@currentheadings{tudheadings}%
    \def\sls@currentplain{plain.tudheadings}%
    {
    \TUDoptions{widehead}%
    \color{red}%
    }
  },%
  onbackground=\def\tud@head@logocolor{white},%
}
\DeclareNewPageStyleAlias{colour.tudheadings}{color.tudheadings}%
\DeclareNewPageStyleAlias{color}{color.tudheadings}%
\DeclareNewPageStyleAlias{colour}{color.tudheadings}%
\listadd\tud@pslist{color.tudheadings}

%\AfterSelectAnyPageStyle{%
%  \ifstr{\GetRealPageStyle{#1}}{color.tudheadings}{{\color{red}}}{bbb}
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\KOMAoptions{titlepage=no}
\uppertitleback{\blindtext}
\maketitle
\titlepagestyle
%\pagestyle{empty.tudscrheadings}
%

%\blindtext\clearpage
%
%\pagestyle{scrheadings}
%
%\blindtext\clearpage
%
%\pagestyle{empty.tudheadings}
%
%\blindtext\clearpage
%
%\pagestyle{headings}
%
%\blindtext\clearpage
%
%\meaning\scrlayer@exec@before@pagestyle@hook
%\defpagestyle{plain}{}{}
%
%\pagestyle{plain}
%
%\GetRealPageStyle{plain}

\blindtext\clearpage

\newpagecolor{red}

\blindtext\clearpage

\TUDoptions{cleardoublespecialpage=color}
\chapter{title}
%\currentpagestyle

%\meaning\ps@plain

\newpagecolor{green}

\blindtext\clearpage

\restorepagecolor

\blindtext\clearpage

\end{document}

\section{Überschrift}
\blindtext
\subsection{Überschrift}
\blindtext
\subsubsection{Überschrift}
\blindtext
\clearpage
