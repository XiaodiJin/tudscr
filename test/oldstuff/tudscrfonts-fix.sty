%%
%% This is file `tudscrfonts-fix.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% tudscr-version.dtx  (with options: `package')
%% 
%% ============================================================================
%% 
%%  TUD-KOMA-Script
%%  Copyright (c) Falk Hanisch <tudscr@gmail.com>, 2012-2015
%% 
%% ============================================================================
%% 
%%  This work may be distributed and/or modified under the conditions of the
%%  LaTeX Project Public License, version 1.3c of the license. The latest
%%  version of this license is in http://www.latex-project.org/lppl.txt and
%%  version 1.3c or later is part of all distributions of LaTeX 2005/12/01
%%  or later and of this work. This work has the LPPL maintenance status
%%  "author-maintained". The current maintainer and author of this work
%%  is Falk Hanisch.
%% 
%% ----------------------------------------------------------------------------
%% 
%%  Dieses Werk darf nach den Bedingungen der LaTeX Project Public Lizenz
%%  in der Version 1.3c, verteilt und/oder veraendert werden. Die aktuelle
%%  Version dieser Lizenz ist http://www.latex-project.org/lppl.txt und
%%  Version 1.3c oder spaeter ist Teil aller Verteilungen von LaTeX 2005/12/01
%%  oder spaeter und dieses Werks. Dieses Werk hat den LPPL-Verwaltungs-Status
%%  "author-maintained", wird somit allein durch den Autor verwaltet. Der
%%  aktuelle Verwalter und Autor dieses Werkes ist Falk Hanisch.
%% 
%% ============================================================================
%% 
%%% From File: tudscr-version.dtx
\begingroup%
  \catcode`\@11\relax%
  \ifx\TUDVersion\undefined%
    \newcommand*\@TUDVersion[1]{%
      \gdef\TUDVersion{#1}%
      \gdef\TUDScriptVersion{#1}%
    }%
  \else%
    \newcommand*\@TUDVersion[1]{%
      \def\@tempa{#1}%
      \ifx\TUDVersion\@tempa\else%
        \@latex@warning@no@line{%
          \noexpand\TUDVersion\space is `\TUDVersion',\MessageBreak%
          but `#1' was expected!\MessageBreak%
          You should not use classes, packages or files from\MessageBreak%
          different TUD-KOMA-Script-Bundle versions%
        }%
      \fi%
    }%
  \fi%
  \@TUDVersion{2015/11/23 v2.05 BETA TUD-KOMA-Script}%
\endgroup%
\providecommand*\tudscrmail{tudscr@gmail.com}
\@ifundefined{TUDScript}{%
  \DeclareRobustCommand{\TUDScript}{%
    \ifdin{TUD-KOMA-SCRIPT}{%
      \textsf{T\kern.05em U\kern.05em D\kern.1em-\kern.1em}\KOMAScript%
    }\csname xspace\endcsname%
  }%
}{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifx\usepackage\RequirePackage%
  \newcommand*\tud@fontsfix@wrn{%
    \PackageWarningNoLine{tudscrfonts-fix}{%
      You should load `tudscrfonts-fix' before any\MessageBreak%
      document class with `\string\RequirePackage'%
    }%
  }%
\else%
  \newcommand*\tud@fontsfix@wrn{%
    \PackageWarningNoLine{tudscrfonts-fix}{%
      You should use `tudscrfonts-fix' only\MessageBreak%
      with supported classes. These are: `tudbook',\MessageBreak%
      `tudbeamer', `tudfax', `tudform', `tudhaus',\MessageBreak%
      `tudletter', `tudposter' and `tudmathposter',\MessageBreak%
      as well as `tudscrbookold', `tudscrreprtold'\MessageBreak%
      and `tudscrartclold'. Otherwise it's adequate\MessageBreak%
      to use package `tudscrfonts' as usual%
    }%
  }%
\fi%
\RequirePackage{tudscrbase}
\PassOptionsToPackage{vspacing=false}{tudscrfonts}
\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{tudscrfonts}}
\ProcessOptions\relax
\AtEndPreamble{%
  \tud@fontsfix@wrn%
  \RequirePackage{tudscrfonts}%
}
\newcommand*\tud@fontsfix@BeforeClass[2]{%
  \BeforeClass{#1}{%
    \let\tud@fontsfix@wrn\relax%
%%% v1
    \newcommand*\tud@fontsfix@DeclareFixedFont{}
    \let\tud@fontsfix@DeclareFixedFont\DeclareFixedFont%
    \renewcommand*\DeclareFixedFont[6]{}%
%%% v2
  %  \newcommand*\tud@fontsfix@define@newfont{}
  %  \let\tud@fontsfix@define@newfont\define@newfont%
  %  \let\define@newfont\relax%
%%%
    \tud@cmd@store{rmdefault}%
    \tud@cmd@store{sfdefault}%
    \tud@cmd@store{ttdefault}%
    \tud@cmd@store{bfdefault}%
    \tud@cmd@store{mddefault}%
    \tud@cmd@store{itdefault}%
    \tud@cmd@store{sldefault}%
    \tud@cmd@store{scdefault}%
    \tud@cmd@store{updefault}%
    \tud@cmd@store{familydefault}%
    \tud@cmd@store{seriesdefault}%
    \tud@cmd@store{shapedefault}%
    #2%
  }%
}
\newcommand*\tud@fontsfix@AfterClass[2]{%
  \AfterClass{#1}{%
%%% v1
    \let\DeclareFixedFont\tud@fontsfix@DeclareFixedFont%
    \undef\tud@fontsfix@DeclareFixedFont%
%%% v2
%    \let\define@newfont\tud@define@newfont%
%%%
    \tud@cmd@restore{rmdefault}%
    \tud@cmd@restore{sfdefault}%
    \tud@cmd@restore{ttdefault}%
    \tud@cmd@restore{bfdefault}%
    \tud@cmd@restore{mddefault}%
    \tud@cmd@restore{itdefault}%
    \tud@cmd@restore{sldefault}%
    \tud@cmd@restore{scdefault}%
    \tud@cmd@restore{updefault}%
    \tud@cmd@restore{familydefault}%
    \tud@cmd@restore{seriesdefault}%
    \tud@cmd@restore{shapedefault}%
    #2%
  }%
}
\newcommand*\tud@fontsfix@oldclasses{%
  \AfterPackage{tudscrfonts}{%
    \AtBeginDocument{%
      \newcommand*\univLightVII{}%
      \newcommand*\univLightObliqueVII{}%
      \newcommand*\univBoldVII{}%
      \newcommand*\univLightIX{}%
      \newcommand*\univLightObliqueIX{}%
      \newcommand*\univBoldIX{}%
      \newcommand*\univLightXI{}%
      \newcommand*\univLightObliqueXI{}%
      \newcommand*\univBoldXI{}%
      \newcommand*\univLightXV{}%
      \newcommand*\univLightObliqueXV{}%
      \newcommand*\univBoldXV{}%
      \newcommand*\univLightHead{}%
      \newcommand*\univBoldHead{}%
      \providecommand*\tud@head@fntsz{9}
      \if@tud@univers%
        \if@tud@fontspec%
          \DeclareFixedFont{\univLightVII}{\encodingdefault}%
            {UniversLight}{m}{n}{7}%
          \DeclareFixedFont{\univLightObliqueVII}{\encodingdefault}%
            {UniversLightOblique}{m}{n}{7}%
          \DeclareFixedFont{\univBoldVII}{\encodingdefault}%
            {UniversBold}{m}{n}{7}%
          \DeclareFixedFont{\univLightIX}{\encodingdefault}%
            {UniversLight}{m}{n}{9}%
          \DeclareFixedFont{\univLightObliqueIX}{\encodingdefault}%
            {UniversLightOblique}{m}{n}{9}%
          \DeclareFixedFont{\univBoldIX}{\encodingdefault}%
            {UniversBold}{m}{n}{9}%
          \DeclareFixedFont{\univLightXI}{\encodingdefault}%
            {UniversLight}{m}{n}{11}%
          \DeclareFixedFont{\univLightObliqueXI}{\encodingdefault}%
            {UniversLightOblique}{m}{n}{11}%
          \DeclareFixedFont{\univBoldXI}{\encodingdefault}%
            {UniversBold}{m}{n}{11}%
          \DeclareFixedFont{\univLightXV}{\encodingdefault}%
            {UniversLight}{m}{n}{15}%
          \DeclareFixedFont{\univLightObliqueXV}{\encodingdefault}%
            {UniversLightOblique}{m}{n}{15}%
          \DeclareFixedFont{\univBoldXV}{\encodingdefault}%
            {UniversBold}{m}{n}{15}%
          \DeclareFixedFont{\univLightHead}{\encodingdefault}%
            {UniversLight}{m}{n}{\tud@head@fntsz}%
          \DeclareFixedFont{\univBoldHead}{\encodingdefault}%
            {UniversBold}{m}{n}{\tud@head@fntsz}%
          \setsansfont{Univers Light}[%
            BoldFont = Univers Bold,%
            ItalicFont = Univers Light Oblique,%
            BoldItalicFont = Univers Bold Oblique,%
          ]%
        \else%
          \DeclareFixedFont{\univLightVII}{\encodingdefault}%
            {\tud@univers}{l}{n}{7}%
          \DeclareFixedFont{\univLightObliqueVII}{\encodingdefault}%
            {\tud@univers}{l}{sl}{7}%
          \DeclareFixedFont{\univBoldVII}{\encodingdefault}%
            {\tud@univers}{b}{n}{7}%
          \DeclareFixedFont{\univLightIX}{\encodingdefault}%
            {\tud@univers}{l}{n}{9}%
          \DeclareFixedFont{\univLightObliqueIX}{\encodingdefault}%
            {\tud@univers}{l}{sl}{9}%
          \DeclareFixedFont{\univBoldIX}{\encodingdefault}%
            {\tud@univers}{b}{n}{9}%
          \DeclareFixedFont{\univLightXI}{\encodingdefault}%
            {\tud@univers}{l}{n}{11}%
          \DeclareFixedFont{\univLightObliqueXI}{\encodingdefault}%
            {\tud@univers}{l}{sl}{11}%
          \DeclareFixedFont{\univBoldXI}{\encodingdefault}%
            {\tud@univers}{b}{n}{11}%
          \DeclareFixedFont{\univLightXV}{\encodingdefault}%
            {\tud@univers}{l}{n}{15}%
          \DeclareFixedFont{\univLightObliqueXV}{\encodingdefault}%
            {\tud@univers}{l}{sl}{15}%
          \DeclareFixedFont{\univBoldXV}{\encodingdefault}%
            {\tud@univers}{b}{n}{15}%
          \DeclareFixedFont{\univLightHead}{\encodingdefault}%
            {\tud@univers}{l}{n}{\tud@head@fntsz}%
          \DeclareFixedFont{\univBoldHead}{\encodingdefault}%
            {\tud@univers}{b}{n}{\tud@head@fntsz}%
          \renewcommand*\bfdefault{b}%
        \fi%
      \else%
        \DeclareFixedFont{\univLightVII}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\updefault}{7}%
        \DeclareFixedFont{\univLightObliqueVII}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\sldefault}{7}%
        \DeclareFixedFont{\univBoldVII}{\encodingdefault}%
          {\sfdefault}{\bfdefault}{\updefault}{7}%
        \DeclareFixedFont{\univLightIX}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\updefault}{9}%
        \DeclareFixedFont{\univLightObliqueIX}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\sldefault}{9}%
        \DeclareFixedFont{\univBoldIX}{\encodingdefault}%
          {\sfdefault}{\bfdefault}{\updefault}{9}%
        \DeclareFixedFont{\univLightXI}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\updefault}{11}%
        \DeclareFixedFont{\univLightObliqueXI}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\sldefault}{11}%
        \DeclareFixedFont{\univBoldXI}{\encodingdefault}%
          {\sfdefault}{\bfdefault}{\updefault}{11}%
        \DeclareFixedFont{\univLightXV}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\updefault}{15}%
        \DeclareFixedFont{\univLightObliqueXV}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\sldefault}{15}%
        \DeclareFixedFont{\univBoldXV}{\encodingdefault}%
          {\sfdefault}{\bfdefault}{\updefault}{15}%
        \DeclareFixedFont{\univLightHead}{\encodingdefault}%
          {\sfdefault}{\mddefault}{\updefault}{\tud@head@fntsz}%
        \DeclareFixedFont{\univBoldHead}{\encodingdefault}%
          {\sfdefault}{\bfdefault}{\updefault}{\tud@head@fntsz}%
      \fi%
      \let\dinBold\dinbn%
      \let\dinfamily\dinbn%
    }%
  }%
}
\tud@fontsfix@BeforeClass{tudbook}{%
  \PassOptionsToClass{serifmath}{tudbook}%
}
\tud@fontsfix@AfterClass{tudbook}{%
  \tud@fontsfix@oldclasses%
  \patchcmd{\@makechapterhead}{\dinBold\Huge\bfseries}%
    {\bfseries\tud@disposition@font\Huge}{}{\tud@patch@wrn{@makechapterhead}}%
  \patchcmd{\@makeschapterhead}{\dinBold\Huge\bfseries}%
    {\bfseries\tud@disposition@font\Huge}{}{\tud@patch@wrn{@makeschapterhead}}%
  \patchcmd{\section}{\dinBold\Large\bfseries}%
    {\bfseries\tud@disposition@font\Large}{}{\tud@patch@wrn{section}}%
  \patchcmd{\showtitle}{\dinBold\Huge\bfseries}%
    {\bfseries\tud@disposition@font\Huge}{}{\tud@patch@wrn{showtitle}}%
}
\tud@fontsfix@BeforeClass{tudletter}{%
  \PassOptionsToClass{serifmath}{tudletter}%
}
\tud@fontsfix@AfterClass{tudletter}{%
  \tud@fontsfix@oldclasses%
}
\tud@fontsfix@BeforeClass{tudfax}{%
  \PassOptionsToClass{serifmath}{tudfax}%
}
\tud@fontsfix@AfterClass{tudfax}{%
  \tud@fontsfix@oldclasses%
}
\tud@fontsfix@BeforeClass{tudform}{%
  \PassOptionsToClass{serifmath}{tudform}%
}
\tud@fontsfix@AfterClass{tudform}{%
  \tud@fontsfix@oldclasses%
}
\tud@fontsfix@BeforeClass{tudhaus}{%
  \PassOptionsToClass{serifmath}{tudhaus}%
}
\tud@fontsfix@AfterClass{tudhaus}{%
  \tud@fontsfix@oldclasses%
}
\tud@fontsfix@BeforeClass{tudbeamer}{%
  \PassOptionsToClass{serifmath}{tudbeamer}%
}
\tud@fontsfix@AfterClass{tudbeamer}{%
  \tud@fontsfix@oldclasses%
}
\tud@fontsfix@BeforeClass{tudposter}{%
  \PassOptionsToClass{serifmath}{tudposter}%
  \tud@cmd@store{normalfont}%
  \let\normalfont\relax%
}
\tud@fontsfix@AfterClass{tudposter}{%
  \tud@fontsfix@oldclasses%
  \tud@cmd@restore{normalfont}%
}
\tud@fontsfix@BeforeClass{tudmathposter}{%
  \PassOptionsToClass{serifmath}{tudmathposter}%
}
\tud@fontsfix@AfterClass{tudmathposter}{%
  \tud@fontsfix@oldclasses%
  \if@mathevorgabe%
    \setkomafont{title}{\bfseries\tud@disposition@font\Huge}%
    \renewcommand*\subtitlefont{\mdseries\tud@disposition@font\huge}%
    \renewcommand*\sectionfont{\univbn\LARGE}%
    \renewcommand*\subsectionfont{\univbn\large}%
  \else%
    % TODO
  \fi%
}
% TODO: (Schrift-)Optionen aller Klassen prüfen, ob diese gesetzt werden
\PreventPackageFromLoading[%
%\RequirePackage{amsfonts}
  \RequirePackage{amsmath}
%\RequirePackage{lmodern}
  \let\DeclareTudMathSizes\@gobblefour%
  \newif\if@tudfonts@nodin%
]{tudfonts}%
% TODO: Paket rescalefonts unterdrücken?!


%\@ifclassloaded{tudmathposter}{%
%  \setkomafont{title}{\bfseries\tud@disposition@font\Huge}%
%  \renewcommand*\subtitlefont{\mdseries\tud@disposition@font\huge}%
%  \if@mathevorgabe%
%    \renewcommand*\sectionfont{\univbn\LARGE}%
%    \renewcommand*\subsectionfont{\univbn\large}%
%  \fi%
%}{}
%\@ifpackageloaded{tudfonts}{%
%  \let\if@sansmath\if@tudfonts@sansmath%
%  \renewcommand*\tudfont[1]{\cdfont{#1}}%
%  \if@sansmath%
%    \if@tudfonts@eulermath%
%      \PackageWarningNoLine{tudscrfonts-fix}{%
%        You're using non-serif fonts in math mode. It's\MessageBreak%
%        recommended to pass the option `noeulermath' to\MessageBreak%
%        package `tudfonts'%
%      }%
%    \fi%
%    \if@tud@cdmath\else%
%      \PackageWarning{tudscrfonts-fix}{%
%        If you want to use non-serif fonts in math mode,\MessageBreak%
%        you should also use the option `serifmath'\MessageBreak%
%        as optional argument for \string\documentclass%
%      }%
%    \fi%
%  \fi%
%}{%
%  \newif\if@tudfonts@nodin%
%  \@ifundefined{if@sansmath}{\newif\if@sansmath}{}%
%}
%\@ifclassloaded{tudposter}{%
%  \let\if@sansmath\if@tudposter@sansmath%
%}{}

%\tud@fontsfix@BeforeClass{tudscrbookold}{}
%\tud@fontsfix@BeforeClass{tudscrreprtold}{}
%\tud@fontsfix@BeforeClass{tudscrartclold}{}
%\tud@fontsfix@AfterClass{tudscrbookold}{}
%\tud@fontsfix@AfterClass{tudscrreprtold}{}
%\tud@fontsfix@AfterClass{tudscrartclold}{}
\newcommand*\tud@fontsfix@oldscrclasses{%
  \AfterPackage{tudscrfonts}{%
    \AtBeginDocument{%
      \DeclareSymbolFontAlphabet{\mathrm}{operators}%
    }%
  }%
}

\endinput
%%
%% End of file `tudscrfonts-fix.sty'.
