\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
\documentclass[english,ngerman]{tudscrreprt}
\usepackage{babel}
\usepackage{selinput}
\SelectInputMappings{adieresis={ä},germandbls={ß}}
\usepackage[T1]{fontenc}
\usepackage{scrhack}
\usepackage{tudscrsupervisor}

\AfterPackage*{hyperref}{%
\usepackage[%
  automake,%
% mit Tex Live einfach verwendbar
%  xindy,
  acronym,% Abkürzungen
  symbols,% Formelzeichen
  nomain,% kein Glossar
  translate=babel,%
  nogroupskip,%
  toc,%
  section=chapter,%
  nostyles,%
]{glossaries}
\makeglossaries
}% Ende von AfterPackage*
\AfterPackage*{glossaries}{%
\defglsentryfmt[symbols]{%
  \ifmmode%
    \glssymbol{\glslabel}%
  \else%
    \glsgenentryfmt~\glsentrysymbol{\glslabel}%
  \fi%
}

\providecommand*\greeklettersname{Greek letters}
\providecaptionname{ngerman}{\greeklettersname}{Griechische Symbole}
\providecommand*\romanlettersname{Roman letters}
\providecaptionname{ngerman}{\romanlettersname}{Lateinische Symbole}
\newglossaryentry{greekletters}{%
  type=symbols,%
  name={\greeklettersname},%
  description={\nopostdesc},%
  sort={a}%
}
\newglossaryentry{romanletters}{%
  type=symbols,%
  name={\romanlettersname},%
  description={\nopostdesc},%
  sort={b}%
}

\newglossarystyle{symbsplitlongtabu}{%
  \newcommand*\symbollevel{-1}%
  \renewenvironment{theglossary}{%
    \begin{longtabu}spread 0pt[l]{ccX<{\strut}l}%
  }{%
    \end{longtabu}%
  }%
  \renewcommand*{\glsgroupheading}[1]{}%
  \renewcommand*{\glsgroupskip}{}%
  \newcommand*\symbolhead{%
    \toprule
    \bfseries Symbol & \bfseries Einheit &
    \bfseries Name & \bfseries Seite(n)
    \tabularnewline\midrule
  }
  \renewcommand*{\glossaryheader}{%
    \endfirsthead\symbolhead\endhead%
    \bottomrule\endfoot%
    \gdef\symbollevel{-1}%
  }%
  \renewcommand*{\glossentry}[2]{%
    \ifglshaschildren{##1}{%
      \ifnum\symbollevel>0\relax%
        \tabularnewline\bottomrule\tabularnewline[\smallskipamount]%
      \fi
      \gdef\symbollevel{0}%
      \tabularnewline[\dimexpr-\ht\strutbox-\dp\strutbox\relax]%
      \multicolumn{2}{@{}l}{\minisec{\glsentryname{##1}}}%
    }{%
      \GlossariesWarning{%
        There are no childrens for entry ##1.\MessageBreak
        Nothing will be printed. Maybe you should\MessageBreak
        specify ##1 as a child entry.
      }%
    }%
  }%
  \renewcommand*{\subglossentry}[3]{%
    \ifnum\symbollevel=0\relax%
      \tabularnewline[\medskipamount]\symbolhead%
    \else%
      \tabularnewline
    \fi%
    \gdef\symbollevel{##1}%
    \glsentryitem{##2}% Entry number if required
    \glstarget{##2}{\glossentrysymbol{##2}} &
    \glsentryuseri{##2} &
    \glossentryname{##2} &
    ##3%
  }%
}
}% Ende von AfterPackage*

\newcommand*\symbollettergroup{}
\newcommand*{\newsymbol}[5][]{%
  \ifisgreeksymbol{#4}{%
    \renewcommand*{\symbollettergroup}{greekletters}%
  }{%
    \renewcommand*{\symbollettergroup}{romanletters}%
  }%
  \newglossaryentry{#2}{%
    type=symbols,%
    name={#3},%
    description={\nopostdesc},%
    symbol={\ensuremath{#4}},%
    user1={\ensuremath{\mathrm{#5}}},%
    sort={#2},%
    parent={\symbollettergroup},%
    #1%
  }%
}
\makeatletter
\newcommand*\greeksymbollist{}
\def\@tempa#1{\ifdefvoid{#1}{}{\listadd\greeksymbollist{#1}}}
\forcsvlist{\@tempa}{%
  \alpha,\beta,\varbeta,\gamma,\delta,\epsilon,\varepsilon,\zeta,\eta,%
  \theta,\vartheta,\iota,\kappa,\varkappa,\lambda,\mu,\nu,\xi,\omicron,%
  \pi,\varpi,\rho,\varrho,\sigma,\varsigma,\tau,\upsilon,\phi,\varphi,\chi,%
  \psi,\omega,%
  \Alpha,\Beta,\Gamma,\Delta,\Epsilon,\Zeta,\Eta,\Theta,\Iota,\Kappa,\Lambda,%
  \Mu,\Nu,\Xi,\Omicron,\Pi,\Rho,\Sigma,\Tau,\Upsilon,\Phi,\Chi,\Psi,\Omega%
}
\newcommand*\ifisgreeksymbol[1]{%
  \begingroup%
    \def\@tempa##1{\let##1\@firstofone}%
    \forcsvlist{\@tempa}{%
      \acute,\bar,\breve,\check,\dot,\ddot,\dddot,\ddddot,\hat,\widehat,\grave,%
      \tilde,\widetilde,\vec,%
      \Acute,\Bar,\Breve,\Check,\Dot,\Ddot,\Hat,\Grave,\Tilde,\Vec%
    }%
    \protected@edef\@tempa{#1}%
    \def\@tempb##1_##2\relax{\def\@tempa{##1}}%
    \expandafter\@tempb\@tempa_\relax\relax%
    \def\@tempb##1^##2\relax{\def\@tempa{##1}}%
    \expandafter\@tempb\@tempa^\relax\relax%
    \expandafter\ifinlist\expandafter{\@tempa}{\greeksymbollist}{%
      \aftergroup\@firstoftwo%
    }{%
      \aftergroup\@secondoftwo%
    }%
  \endgroup%
}
\makeatother

\usepackage{booktabs}
\usepackage{array}
\usepackage{tabu}
\usepackage{longtable}
\usepackage{xfrac}

\usepackage[colorlinks,linkcolor=blue]{hyperref}

\begin{document}

\printsymbols[style=symbsplitlongtabu]

\newsymbol{l}{Länge}{l}{m}
\newsymbol{m}{Masse}{m}{kg}
\newsymbol{a}{Beschleunigung}{\ddot{x}}{\sfrac{m}{s^2}}
\newsymbol{t}{Zeit}{t}{s}
\newsymbol{f}{Frequenz}{f}{s^{-1}}
\newsymbol{F}{Kraft}{F}{m \cdot kg \cdot s^{-2} = \sfrac{J}{m}}
\newsymbol{Gamma}{Test Gamma}{\Gamma}{bla}
\newsymbol{epsilon}{Test Epsilon}{\hat{\epsilon_a}}{bla}
\newsymbol{gamma}{Test gamma}{\dot{\gamma}_b}{bla}
\newsymbol{alpha}{Test alpha}{\breve{\dot{\alpha^2}_b}}{bla}


Die Einheiten für die \gls{f} sowie die \gls{F} werden aus den
SI"=Einheiten der Basisgrößen \gls{l}, \gls{m} und \gls{t} abgeleitet.
Und dann gibt es noch die Grundgleichung der Mechanik, welche für den
Fall einer konstanten Kraftwirkung in die Bewegungsrichtung einer
Punktmasse lautet:
\[\gls{F} = \gls{m} \cdot \gls{a}\]

\glsaddall
\end{document}

% TODO Trennung der Symbole in treatise dokumentieren und im Forum posten
% TODO: *-example.tex testen
