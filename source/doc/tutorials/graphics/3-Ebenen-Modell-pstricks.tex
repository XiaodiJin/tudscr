\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
\documentclass[ngerman,DIV=12]{scrreprt}
\usepackage{selinput}\SelectInputMappings{adieresis={ä},germandbls={ß}}
\usepackage[T1]{fontenc}
\usepackage{babel}

\usepackage{pstricks,pst-node,pst-pdf}
\usepackage{ifpdf}
\ifpdf
  \usepackage{showframe}
\fi

\begin{document}
\psset{unit=.01\textwidth,cornersize=absolute,labelsep=.5ex}
\begin{figure}
\centering
\begin{pspicture}(100,64)
\newcommand\fnodetext{}
\def\fnodetext(#1)#2#3{%
  \fnode[framesize=18 8](#1){#2}%
  \rput(#1){\parbox{17\psunit}{\centering\hspace{0pt}#3}}%
}
\newcommand\scriptbox[2][24]{%
  \parbox{#1\psunit}{\scriptsize\centering\hspace{0pt}#2}%
}
\rput(15,10){%
  \rput(0,49){\textbf{Fahrer}}
  \fnodetext(0,40){NE}{Navigations\-ebene}
  \fnodetext(0,24){BE}{Bahnführungsebene}
  \fnodetext(0,08){SE}{Stabilisierungsebene}
  \ncline{->}{NE}{BE}
  \ncput*{\scriptbox{gewählte Fahrtroute\\zeitlicher Ablauf}}
  \ncline{->}{BE}{SE}
  \ncput*{\scriptbox{gewählte Führungsgrößen:\\Sollspur,~Sollgeschwindigkeit}}
  \psframe[linewidth=1pt,linearc=5](-12.5,0)(12.5,54)
}
\rput(50,10){%
  \rput(0,17){\textbf{Fahrzeug}}
  \fnodetext(0,8){FZ}{Längs- und\\Querdynamik}
  \psframe[linewidth=1pt,linearc=5](-12.5,0)(12.5,23)
}
\rput(85,10){%
  \rput(0,49){\textbf{Umwelt}}
  \fnodetext(0,40){SN}{Straßennetz}
  \fnodetext(0,24){FR}{%
    Fahrraum\\\smallskip\scriptsize{Straße und Verkehrssituation}%
  }
  \fnodetext(0,08){FO}{Fahrbahn\-oberfläche}
  \psframe[linewidth=1pt,linearc=5](-12.5,0)(12.5,54)
}

\ncline{->}{SE}{FZ}
\naput{\scriptbox[9]{Stell\-größen}}
\nbput{\scriptbox[9]{Lenken Gasgeben Bremsen}}
\ncline{->}{FZ}{FO}
\naput{\scriptbox[9]{Regel\-größen}}
\nbput{\scriptbox[9]{Fahrzeugbewegung}}

\psset{armA=15,armB=0,angleA=0,angleB=180}
\ncangles{->}{FZ}{FR}
\ncangles{->}{FZ}{SN}
%
\psset{angleA=180,angleB=0}
\newlength{\myarm}
\newlength{\myloopsize}
\pssetlength{\myarm}{-0.5\pslinewidth}
\pssetlength{\myloopsize}{\myarm}
\psaddtolength{\myarm}{5}
\psaddtolength{\myloopsize}{12}

\ncloop[loopsize=11.5,arm=4.5]{<-}{SE}{FO}
\naput{\scriptbox{Istspur, Istgeschwindigkeit}}
\ncloop[loopsize=30.5,arm=5]{<-}{BE}{FR}
\naput{\scriptbox[30]{Bereich sicherer Führungsgrößen}}
\ncloop[loopsize=49.5,arm=5.5]{<-}{NE}{SN}
\naput{\scriptbox{mögliche Fahrtroute}}
\end{pspicture}
\end{figure}
\end{document}
