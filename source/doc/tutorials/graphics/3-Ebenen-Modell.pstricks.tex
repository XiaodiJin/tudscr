%\documentclass[english,ngerman,printversion,class=scrreprt]{standalone}
\documentclass[english,ngerman,class=scrreprt]{standalone}
\input{!myPath}
\input{\myPath Grafiken/!myStandalonePreamble}

% Befehl zum Einbinden von Grafiken relativ zur Hauptdatei:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \includegraphic[optional]{Datei}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \includegraphic[width=50\psunit]{bild}

% Befehl zum Einbinden von MATLAB-Daten mit dataplot (data2pstricks.m)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \includematlabdata[dataplot-Parameter]{Datei}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \includematlabdata[plotstyle=curve,linewidth=2\pslinewidth]{data}


% Befehl für unterschiedliche Grafiken für farbige und monochrome Ausgabe
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \digitalandprint{Befehle digitale Ausgabe}{Befehle Druckausgabe}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% --> printversion muss dafür als Klassenoption gesetzt werden


\begin{document}
\setpstend{640}
\begin{pspicture}(\pstxbegin,\pstybegin)(\pstxend,\pstyend)

\newcommand{\scriptbox}[2]{\parbox{#1}{\begin{singlespace}\scriptsize\centering\hspace{0pt}#2\end{singlespace}}}
\newcommand{\normalbox}[2]{\parbox{#1}{\begin{singlespace}\centering\hspace{0pt}#2\end{singlespace}}}

\psset{framesize=160 80}
\providelength{\myBoxwidth}
\settowidth{\myBoxwidth}{Stabilisierungsm}

\rput(150,100){%
	\rput(0,500){\textbf{Fahrer}}
	\rput(0,420){%
		\rput(0,0){\normalbox{\myBoxwidth}{Navigations\-ebene}}
		\fnode(0,0){NE}
	}
	\rput(0,250){%
		\rput(0,0){\normalbox{\myBoxwidth}{Bahnführungs\-ebene}}
		\fnode(0,0){BE}
	}
	\rput(0,80){%
		\rput(0,0){\normalbox{\myBoxwidth}{Stabilisierungs\-ebene}}
		\fnode(0,0){SE}
	}
	\settowidth{\myBoxwidth}{Sollspur, Sollgeschwindigkeitm}
	\ncline{->}{NE}{BE}
	\ncput*{\scriptbox{\myBoxwidth}{gewählte Fahrtroute\\zeitlicher Ablauf}}
	\ncline{->}{BE}{SE}
	\ncput*{\scriptbox{\myBoxwidth}{gewählte Führungsgrößen:\\Sollspur, Sollgeschwindigkeit}}
	\fnode[linewidth=\heavyrulewidth,linearc=50,framesize=240 540](0,270){F}
}

\rput(500,100){%
	\rput(0,160){\textbf{Fahrzeug}}
	\rput(0,80){%
		\rput(0,0){\normalbox{\myBoxwidth}{Längs- und\\Querdynamik}}
		\fnode(0,0){FZ}
	}
	\fnode[linewidth=\heavyrulewidth,linearc=50,framesize=240 200](0,100){D}
}

\rput(850,100){%
	\rput(0,500){\textbf{Umwelt}}
	\rput(0,420){%
		\rput(0,0){\normalbox{\myBoxwidth}{Straßennetz}}
		\fnode(0,0){SN}
	}
	\rput(0,250){%
		\rput(0,0){\normalbox{\myBoxwidth}{Fahrraum\\\smallskip\scriptsize{Straße und\\Verkehrssituation}}}
		\fnode(0,0){FR}
	}
	\rput(0,80){%
		\rput(0,0){\normalbox{\myBoxwidth}{Fahrbahn\-oberfläche}}
		\fnode(0,0){FO}
	}
	\fnode[linewidth=\heavyrulewidth,linearc=50,framesize=240 540](0,270){U}
}

\ncline{->}{SE}{FZ}
\naput{\scriptbox{4.5em}{Stellgrößen}}
\nbput{\scriptbox{4.5em}{Lenken Gasgeben Bremsen}}
\ncline{->}{FZ}{FO}
\naput{\scriptbox{4.5em}{Regelgrößen}}
\nbput{\scriptbox{4.5em}{Fahrzeugbewegung}}

\psset{armA=170,armB=0,angleA=0,angleB=180}
\ncangles{->}{FZ}{FR}
\ncangles{->}{FZ}{SN}

\psset{angleA=180,angleB=0}
\newlength{\myarm}
\newlength{\myloopsize}
\pssetlength{\myarm}{-0.5\pslinewidth}
\pssetlength{\myloopsize}{\myarm}
\psaddtolength{\myarm}{50}
\psaddtolength{\myloopsize}{120}
\ncloop[loopsize=\myloopsize,arm=\myarm]{<-}{SE}{FO}
\naput{\scriptsize{Istspur, Istgeschwindigkeit}}
\psaddtolength{\myarm}{10}
\psaddtolength{\myloopsize}{200}
\ncloop[loopsize=\myloopsize,arm=\myarm]{<-}{BE}{FR}
\naput{\scriptsize{Bereich sicherer Führungsgrößen}}
\psaddtolength{\myarm}{10}
\psaddtolength{\myloopsize}{200}
\ncloop[loopsize=\myloopsize,arm=\myarm]{<-}{NE}{SN}
\naput{\scriptsize{mögliche Fahrtroute}}

\end{pspicture}
\end{document}