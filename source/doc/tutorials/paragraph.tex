\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
\documentclass[english,ngerman]{tudscrartcl}
\usepackage{selinput}
\SelectInputMappings{adieresis={ä},germandbls={ß}}
\usepackage[T1]{fontenc}
\PassOptionsToPackage{colorlinks=false}{hyperref}
\usepackage{tudscrman}
\usepackage{mwe}
\usepackage{noindentafter}
\lstset{%
  inputencoding=utf8,extendedchars=true,
  literate=%
    {ä}{{\"a}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
    {Ä}{{\"A}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
    {~}{{\textasciitilde}}1 {ß}{{\ss}}1
}

\newcommand*\ignorefloats{%
  \renewenvironment{figure}[1][]{}{}%
  \renewenvironment{table}[1][]{}{}%
  \renewcommand*\caption[1]{}%
  \renewcommand*\label[1]{}%
}

\begin{document}
\section{Ist-Stand}
Der Einzug des Textes wird von LaTeX immer nach einem Absatz gesetzt, wenn die 
Option parskip=false gewählt ist, was dem Standardfall entspricht. Absätze 
werden im Editor durch eine oder mehrere Leerzeilen gekennzeichnet. Wenn die 
Abbildung im Text folgendermaßen gesetzt wird\dots
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\blindtext

\begin{figure}[h]
\centering
\includegraphics[height=2cm]{image-a}
\caption{So sieht's aus}
\label{fig:A}
\end{figure}

\blindtext

In einem neuen Absatz noch der Querverweis auf \autoref{fig:A}.
\end{Excerpt}
%
\dots wird auch ein Absatz gesetzt.

\clearpage
\section{Erster Versuch}
Im einfachsten Fall könnte man die Absätze weglassen, indem man die Leerzeilen 
entfernt oder mit \% auskommentiert\dots
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\blindtext
%
\begin{figure}[h]
\centering
\includegraphics[height=2cm]{image-b}
\caption{So sieht's so schlechter aus}
\label{fig:B}
\end{figure}
%
\blindtext

In einem neuen Absatz noch der Querverweis auf \autoref{fig:B}.
\end{Excerpt}
%
\dots was allerdings auch nicht zum gewünschten Ergebnis führt, da der Absatz 
nun völlig unter die Räder kommt.

\clearpage
\section{Änderung der Absatzformatierung}
Man könnte jetzt auf die Idee kommen den Absatzeinzug zu ändern\dots
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\KOMAoptions{parskip=half}
\blindtext

\begin{figure}[h]
\centering
\includegraphics[height=2cm]{image-c}
\caption{So sieht's besser aus}
\label{fig:C}
\end{figure}

\blindtext

In einem neuen Absatz noch der Querverweis auf \autoref{fig:C}.
\end{Excerpt}
%
\enlargethispage{\baselineskip}%
\dots womit die Absatzformatierung im kompletten Dokument geändert wird und das
dementsprechend auch nicht wirklich sinnvoll ist, da sich damit das komplette 
Layout ändert und Einzüge zur Kennzeichnung von Absätzen stets den Vorzug vor 
Absatzabständen bekommen sollten.

\clearpage
\section{Selektives Abschalten des Absatzeinzuges}
Mit dem Befehl \verb|\noindent| kann man Absatzeinzüge selektiv 
deaktivieren\dots
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\blindtext

\begin{figure}[h]
\centering
\includegraphics[height=2cm]{image-a}
\caption{So sieht's besser aus}
\label{fig:D}
\end{figure}

\noindent\blindtext

In einem neuen Absatz noch der Querverweis auf \autoref{fig:D}.
\end{Excerpt}
%
\dots was innerhalb des kompletten Dokumentes ziemlich mühselig wird.

\clearpage
\section{Der Weisheit letzter Schluss}
Mit dem Paket \verb|noindentafter| wird das alles ganz einfach. Lädt man das in 
der Präambel und verwendet anschließend \verb|\NoIndentAfterEnv{figure}| hat 
sich das Problem erledigt.
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\NoIndentAfterEnv{figure}
\blindtext

\begin{figure}[h]
\centering
\includegraphics[height=2cm]{image-b}
\caption{So passt's}
\label{fig:E}
\end{figure}

\blindtext

In einem neuen Absatz noch der Querverweis auf \autoref{fig:E}.
\end{Excerpt}
%
Die Dokumentation des Paketes kann übrigens mit \verb|texdoc noindentafter| in 
der Konsole aufgerufen werden. Eine letzte Anmerkung noch\dots

\clearpage
\section{Anmerkung am Rande}
Abbildungen sollten in ihrer Umgebung durchaus gleiten dürfen. Nicht umsonst 
heißen die Dinger Gleitumgebungen. Der Parameter \verb|[h]| kann durchaus 
weggelassen werden. Einer Referenz auf die Abbildung reicht absolut zu. Tauchen 
Abbildungen innerhalb des textkörpers auf, unterbrechend diese nur unnötig den 
Lesefluss. Das beste ist demzufolge:
\let\NoIndentAfterThis\relax
%
\InputHook{\ignorefloats}
\begin{Excerpt}
\blindtext

\begin{figure}
\centering
\includegraphics[height=2cm]{image-c}
\caption{So passt's besser}
\label{fig:F}
\end{figure}

In einem neuen Absatz noch der Querverweis auf \autoref{fig:F}.
\blindtext
\end{Excerpt}
%
\enlargethispage{\baselineskip}%
Das wirkt am Anfang etwas ungewohnt, insbesondere wenn man aus der Welt von 
MS~Office kommt. Aus typographischen Geschichtspunkten ist dies jedoch die 
beste Lösung. Die Entwickler von \LaTeX{} haben sich seinerzeit schon etwas 
dabei gedacht.
\end{document}
